"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var clock,finalScore=0,submit=!0,scoreToShow=[],gameover=!1,SceneManager=function(){function e(){_classCallCheck(this,e),this.menuScene=document.getElementById("menu"),this.gameScene=document.getElementById("game-canvas"),this.gameScene2=document.getElementById("game-canvas2"),this.gameOverScene=document.getElementById("gameover"),this.hud=document.getElementById("hud"),this.scoreText=document.getElementById("score-text"),this.startButton=document.getElementById("start-game-button"),this.restartButton=document.getElementById("restart-game-button"),this.exitButton=document.getElementById("exit-button"),this.gameOverCounter=!0,this.startGameMusic=!0,this.startGameSound=new Audio("/Sounds/random silly chip song.ogg"),this.finalScore=0,this.handlePlayerClick()}return _createClass(e,[{key:"startGame",value:function(){for(scoreToShow=[],this.menuScene.classList.remove("active"),this.gameOverScene.classList.remove("active"),this.startGameMusic=!0,this.gameOverCounter=!0;this.startGameMusic;)finalScore=0,this.startGameSound.loop=!0,this.startGameSound.play(),this.startGameMusic=!1;this.showHud(),this.setGameScore(0),clock=setInterval(function(){finalScore+=1,document.getElementById("score-text").textContent=finalScore},1e3),submit=!0}},{key:"showMenu",value:function(){this.gameOverScene.classList.remove("active"),this.menuScene.classList.add("active")}},{key:"showHud",value:function(){this.hud.classList.add("active")}},{key:"hideHud",value:function(){this.hud.classList.remove("active")}},{key:"setGameScore",value:function(e){finalScore+=e,this.scoreText.textContent=finalScore}},{key:"gameOver",value:function(){for(scoreToShow.push(finalScore),this.scoreText.textContent=scoreToShow[0],clearInterval(clock),document.getElementById("scoreInput").value=scoreToShow[0],document.getElementById("scoreValue").value=scoreToShow[0];submit;){$.ajax({url:"/getScore/"+finalScore,method:"POST",dataType:"json",data:$("#scoreForm").serialize()}).done(function(e){$(".container").html(e)}),submit=!1}for(this.startGameSound.pause(),this.startGameMusic=!1;this.gameOverCounter;){new Audio("/Sounds/gameover.wav").play(),this.gameOverCounter=!1}this.gameOverScene.classList.add("active"),this.hideHud()}},{key:"handlePlayerClick",value:function(){var e=this;this.startButton.onclick=function(t){return e.startGame(),game.restartGame(),t.preventDefault(),!1},this.exitButton.onclick=function(t){return e.showMenu(),t.preventDefault(),!1},this.restartButton.onclick=function(t){return e.startGame(),game.restartGame(),t.preventDefault(),!1}}}]),e}(),LevelData=function e(){_classCallCheck(this,e),this.levels=[{gapX:0,gapY:0,widthDiff:0,total:15,coinChance:.3,enemyChance:.2,doubleCoinChance:.01},{gapX:30,gapY:20,widthDiff:10,total:20,coinChance:.4,enemyChance:.2,doubleCoinChance:.05},{gapX:20,gapY:30,widthDiff:30,total:22,coinChance:.6,enemyChance:.3,doubleCoinChance:.08},{gapX:40,gapY:40,widthDiff:50,total:24,coinChance:.7,enemyChance:.4,doubleCoinChance:.09},{gapX:50,gapY:50,widthDiff:100,total:50,coinChance:.8,enemyChance:.4,doubleCoinChance:.1},{gapX:0,gapY:0,widthDiff:0,total:5,coinChance:0,enemyChance:0},{gapX:0,gapY:0,widthDiff:0,total:1,coinChance:0,enemyChance:0}]},ScoreCalculator=function(){function e(){_classCallCheck(this,e),this.score=0}return _createClass(e,[{key:"increaseScore",value:function(e){this.score=(e+1)*(e+1)}}]),e}(),GameObject=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(void 0!==e){i.graphic=e,i.addChild(i.graphic);var s=i.graphic.nominalBounds;i.setBounds(s.x,s.y,s.width,s.height)}return i}return _inherits(t,createjs.Container),t}(),MovableGameObject=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.isOnGround=!1,i.velocity={x:0,y:0},i.on("tick",i.tick),i}return _inherits(t,GameObject),_createClass(t,[{key:"tick",value:function(){this.y+=this.velocity.y,this.x+=this.velocity.x}}]),t}(),DoubleCoin=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.CoinGraphic));return e.velocity.y=-50,e.directionY=-1,e.speed=1,e.offsetY=20,e.maxOffset=30,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=-1)}}]),t}(),Coin=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.GreenCupGraphic));return e.velocity.y=-30,e.directionY=-1,e.speed=.5,e.offsetY=10,e.maxOffset=15,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=-1)}}]),t}(),Enemy=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyHTML1));return e.directionX=-1,e.speed=1,e.offsetX=10,e.maxOffset=15,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy2=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyHTML2));return e.directionX=0,e.speed=0,e.offsetX=0,e.maxOffset=0,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=0)}}]),t}(),Enemy3=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyHTML3));return e.directionX=-1,e.speed=1,e.offsetX=0,e.maxOffset=1,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy4=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyCSS1));return e.directionX=-1,e.speed=1,e.offsetX=5,e.maxOffset=10,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy5=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyCSS2));return e.directionX=0,e.speed=0,e.offsetX=0,e.maxOffset=0,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=0)}}]),t}(),Enemy6=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyCSS3));return e.directionX=-1,e.speed=1,e.offsetX=0,e.maxOffset=1,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy7=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJS1));return e.velocity.y=-60,e.directionY=-1,e.speed=.5,e.offsetY=20,e.maxOffset=40,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=-1)}}]),t}(),Enemy8=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJS2));return e.directionX=-5,e.speed=1.5,e.offsetX=2,e.maxOffset=8,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy9=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJS3));return e.directionX=-1,e.speed=.1,e.offsetX=0,e.maxOffset=10,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy10=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJava1));return e.directionX=-1,e.speed=1,e.offsetX=0,e.maxOffset=1,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Enemy11=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJava2));return e.velocity.y=-60,e.directionY=-.5,e.directionX=-.5,e.speed=.5,e.offsetY=60,e.offsetX=60,e.maxOffset=80,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=-1)}}]),t}(),Enemy12=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EnemyJava3));return e.directionX=-.5,e.speed=1,e.offsetX=10,e.maxOffset=25,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.x=this.speed*this.directionX,this.offsetX+=this.velocity.x,Math.abs(this.offsetX)>this.maxOffset&&(this.directionX*=-1)}}]),t}(),Hero=function(e){function t(){_classCallCheck(this,t);var e,i=document.getElementById("selectCharacter").value;return 1==i?e=new lib.HeroGraphic1:2==i?e=new lib.HeroGraphic2:3==i?e=new lib.HeroGraphic3:4==i?e=new lib.HeroGraphic4:5==i&&(e=new lib.HeroGraphic5),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,MovableGameObject),_createClass(t,[{key:"run",value:function(){this.isOnGround||(this.velocity.x=5,this.graphic.gotoAndPlay("run"),this.isOnGround=!0)}},{key:"jump",value:function(){this.isOnGround&&(new Audio("/Sounds/jump_07.wav").play(),this.velocity.y=-13,this.graphic.gotoAndPlay("jump"),this.isOnGround=!1)}},{key:"stop",value:function(){this.isOnGround||(this.velocity.y=0,this.velocity.x=0,this.isOnGround=!0)}}]),t}(),Powerup=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.PowerupGraphic1));return e.velocity.y=-30,e.directionY=-1,e.speed=.5,e.offsetY=10,e.maxOffset=15,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=-1)}}]),t}(),EndingItem=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.EndItem));return e.velocity.y=0,e.directionY=0,e.speed=0,e.offsetY=0,e.maxOffset=0,e.on("tick",e.move),e}return _inherits(t,MovableGameObject),_createClass(t,[{key:"move",value:function(){this.velocity.y=this.speed*this.directionY,this.offsetY+=this.velocity.y,Math.abs(this.offsetY)>this.maxOffset&&(this.directionY*=0)}}]),t}(),Platform=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new lib.PlatformGraphic1))}return _inherits(t,GameObject),_createClass(t,[{key:"setClippingWidth",value:function(e){this.graphic.instance.mask=new createjs.Shape((new createjs.Graphics).beginFill("#000").drawRect(0,0,e,this.getBounds().height)),this.setBounds(this.x,this.y,e,this.getBounds().height)}}]),t}(),World=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.levelData=new LevelData,e.scoreCalculator=new ScoreCalculator,e.currentLevel=0,e.on("tick",e.tick),e.platforms=[],e.powerups=[],e.enemies=[],e.coins=[],e.doublecoins=[],e.endingitems=[],e.generatePlatforms(),e.generateEnemies(),e.generatePowerups(),e.generateEndingItem(),e.generateCoins(),e.generateDoubleCoins(),e.addHero(),gameover?e.hero.stop():e.hero.run(),e}return _inherits(t,createjs.Container),_createClass(t,[{key:"tick",value:function(){this.applyGravity(),!1!==this.targetHitTestObjects(this.hero,this.enemies)&&game.gameOver();var e=this.targetHitTestObjects(this.hero,this.coins);!1!==e&&(this.eatCoin(e),this.scoreCalculator.increaseScore(this.currentLevel),sceneManager.setGameScore(this.scoreCalculator.score));var t=this.targetHitTestObjects(this.hero,this.doublecoins);!1!==t&&(this.eatDoubleCoin(t),this.scoreCalculator.increaseScore(this.currentLevel+2),sceneManager.setGameScore(this.scoreCalculator.score));var i=this.targetHitTestObjects(this.hero,this.powerups);!1!==i&&(this.eatPowerup(i),this.hero.velocity.x=10);var s=this.targetHitTestObjects(this.hero,this.endingitems);if(!1!==s){for(this.eatEndItem(s),this.scoreCalculator.increaseScore(this.currentLevel+25),sceneManager.setGameScore(this.scoreCalculator.score),game.gameOver(),this.hero.velocity.x=0,this.hero.stop(),gameover=!0,scoreToShow.push(finalScore),this.scoreText.textContent=scoreToShow[0],clearInterval(clock),document.getElementById("scoreInput").value=scoreToShow[0],document.getElementById("scoreValue").value=scoreToShow[0];submit;){$.ajax({url:"/getScore/"+finalScore,method:"POST",dataType:"json",data:$("#scoreForm").serialize()}).done(function(e){$(".container").html(e)}),submit=!1}for(this.startGameSound.pause(),this.startGameMusic=!1;this.gameOverCounter;){new Audio("/Sounds/gameover.wav").play(),this.gameOverCounter=!1}}this.hero.y>game.stage.height&&game.gameOver(),this.x-=this.hero.velocity.x}},{key:"addHero",value:function(){var e=new Hero;this.addChild(e),e.x=100,e.y=100,this.hero=e}},{key:"generatePlatforms",value:function(){var e=100,t=200,i=0,s=!0,n=!1,a=void 0;try{for(var o,r=this.levelData.levels[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){for(var c=o.value,h=0;h<c.total;h++){var l=new Platform;l.x=e,l.y=t;var u=l.getBounds().width;l.setClippingWidth(u-Math.random()*c.widthDiff),l.levelNumber=i,this.platforms.push(l),e=l.x+l.getBounds().width+Math.random()*c.gapX,t=l.y+(Math.random()-.5)*c.gapY,this.addChild(l)}i+=1}}catch(e){n=!0,a=e}finally{try{!s&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"generateEnemies",value:function(){for(var e=2;e<this.platforms.length;e++){var t,i=this.platforms[e],s=i.levelNumber,n=this.levelData.levels[s].enemyChance;if(Math.random()<n){switch(s){case 0:switch(Math.floor(3*Math.random())+1){case 1:t=new Enemy;break;case 2:t=new Enemy2;break;case 3:t=new Enemy3;break;default:t=new Enemy}break;case 1:switch(Math.floor(3*Math.random())+1){case 1:t=new Enemy4;break;case 2:t=new Enemy5;break;case 3:t=new Enemy6;break;default:t=new Enemy4}break;case 2:switch(Math.floor(3*Math.random())+1){case 1:t=new Enemy7;break;case 2:t=new Enemy8;break;case 3:t=new Enemy9;break;default:t=new Enemy8}break;case 3:switch(Math.floor(3*Math.random())+1){case 1:t=new Enemy10;break;case 2:t=new Enemy11;break;case 3:t=new Enemy12;break;default:t=new Enemy10}break;case 4:switch(Math.floor(3*Math.random())+1){case 1:t=new Enemy10;break;case 2:t=new Enemy11;break;case 3:default:t=new Enemy12}}t.x=i.x+i.getBounds().width/2,t.y=i.y-t.getBounds().height,this.addChild(t),this.enemies.push(t)}}}},{key:"generatePowerups",value:function(){var e=!0,t=!1,i=void 0;try{for(var s,n=this.platforms[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var a=s.value;a.levelNumber;if(Math.random()<.05){var o=new Powerup;o.x=a.x+Math.random()*a.getBounds().width,o.y=a.y-o.getBounds().height,this.addChild(o),this.powerups.push(o)}}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"generateEndingItem",value:function(){var e=!0,t=!1,i=void 0;try{for(var s,n=this.platforms[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var a=s.value;if(6==a.levelNumber){var o=new EndingItem;o.x=a.x+Math.random()*a.getBounds().width,o.y=a.y-o.getBounds().height,this.addChild(o),this.endingitems.push(o)}}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"generateCoins",value:function(){var e=!0,t=!1,i=void 0;try{for(var s,n=this.platforms[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var a=s.value,o=a.levelNumber,r=this.levelData.levels[o].coinChance;if(Math.random()<r){var c=new Coin;c.x=a.x+Math.random()*a.getBounds().width,c.y=a.y-c.getBounds().height,this.addChild(c),this.coins.push(c)}}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"generateDoubleCoins",value:function(){var e=!0,t=!1,i=void 0;try{for(var s,n=this.platforms[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var a=s.value,o=a.levelNumber,r=this.levelData.levels[o].doubleCoinChance;if(Math.random()<r){var c=new DoubleCoin;c.x=a.x+Math.random()*a.getBounds().width,c.y=a.y-c.getBounds().height,this.addChild(c),this.doublecoins.push(c)}}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"eatPowerup",value:function(e){for(var t=0;t<this.powerups.length;t++)e===this.powerups[t]&&this.powerups.splice(t,1);e.parent.removeChild(e)}},{key:"eatEndItem",value:function(e){for(var t=0;t<this.endingitems.length;t++)e===this.endingitems[t]&&this.endingitems.splice(t,1);e.parent.removeChild(e)}},{key:"eatCoin",value:function(e){for(var t=0;t<this.coins.length;t++){if(e===this.coins[t])new Audio("/Sounds/pickup_item.wav").play(),this.coins.splice(t,1)}e.parent.removeChild(e)}},{key:"eatDoubleCoin",value:function(e){for(var t=0;t<this.doublecoins.length;t++){if(e===this.doublecoins[t])new Audio("/Sounds/pickup_item.wav").play(),this.doublecoins.splice(t,1)}e.parent.removeChild(e)}},{key:"applyGravity",value:function(){var e=this.hero;e.velocity.y+=1,e.velocity.y=Math.min(e.velocity.y,5),this.willObjectOnGround(e)&&(e.velocity.y=1);var t=this.isObjectOnGround(e);!1!==t&&e.velocity.y>0&&(this.currentLevel=t.levelNumber,e.velocity.y=0,e.run())}},{key:"targetHitTestObjects",value:function(e,t){var i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var r=a.value;if(this.objectsHitTest(e,r))return r}}catch(e){s=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}return!1}},{key:"objectsHitTest",value:function(e,t){var i=e.x,s=e.y,n=e.getBounds().width-5,a=e.getBounds().height-5,o=t.x,r=t.y,c=t.getBounds().width-5,h=t.getBounds().height-5;return 2*Math.abs(i-o)<n+c&&2*Math.abs(s-r)<a+h}},{key:"isObjectOnGround",value:function(e){e.getBounds().width;var t=e.getBounds().height,i=!0,s=!1,n=void 0;try{for(var a,o=this.platforms[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var r=a.value,c=r.getBounds().width,h=r.getBounds().height;if(e.x>=r.x&&e.x<r.x+c&&e.y+t>=r.y&&e.y+t<=r.y+h)return r}}catch(e){s=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}return!1}},{key:"willObjectOnGround",value:function(e){e.getBounds().width;var t=e.getBounds().height,i=e.y+t+e.velocity.y,s=!0,n=!1,a=void 0;try{for(var o,r=this.platforms[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var c=o.value,h=c.getBounds().width,l=c.getBounds().height;if(e.x>=c.x&&e.x<c.x+h&&i>=c.y&&i<=c.y+l)return!0}}catch(e){n=!0,a=e}finally{try{!s&&r.return&&r.return()}finally{if(n)throw a}}return!1}}]),t}(),Game=function(){function e(){_classCallCheck(this,e),console.log("Welcome to the game. Version "+this.version()),this.loadSound(),this.canvas=document.getElementById("game-canvas"),this.stage=new createjs.Stage(this.canvas),this.stage.width=this.canvas.width,this.stage.height=this.canvas.height,this.canvas2=document.getElementById("game-canvas2"),this.stage2=new createjs.Stage(this.canvas2),this.stage.width=this.canvas.width,this.stage.height=this.canvas.height,this.stage2.width=this.canvas2.width,this.stage2.height=this.canvas2.height,createjs.Touch.enable(this.stage),this.retinalize(),createjs.Ticker.setFPS(60),createjs.Ticker.on("tick",this.stage),createjs.Ticker.on("tick",this.stage2),this.gameLoaded=!1,this.loadGraphics(),setInterval(function(){finalScore+=1,document.getElementById("score-text").textContent=finalScore},1e3);document.getElementById("fullscreenbtn").addEventListener("click",function(){document.getElementById("character-panel").style.display="none";var e=document.getElementById("game-container"),t=document.getElementById("game-container");e.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px";var i=document.getElementById("game");document.getElementById("game").style.width=window.innerWidth+"px",i.style.height=window.innerHeight+"px";var s=document.getElementById("game-canvas"),n=document.getElementById("game-canvas");s.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px";var a=document.getElementById("game-canvas2"),o=document.getElementById("game-canvas2");a.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px",n.focus();var r=document.getElementById("score-text-p"),c=document.getElementById("score-text");document.getElementById("close-fullscreen").style.display="inline-block",r.style.fontSize="60px",c.style.fontSize="60px"})}return _createClass(e,[{key:"version",value:function(){return"1.0.0"}},{key:"loadSound",value:function(){}},{key:"loadGraphics",value:function(){var e=new createjs.LoadQueue(!1);e.addEventListener("fileload",function(e){"image"==e.item.type&&(images[e.item.id]=e.result)}),e.addEventListener("complete",function(e){var t=e.target;ss.RealGame_atlas_=t.getResult("RealGame_atlas_"),document.getElementById("loader").style.display="none",document.getElementById("start-game-button").style.display="inline-block"}.bind(this)),e.loadFile({src:"images/RealGame_atlas_.json",type:"spritesheet",id:"RealGame_atlas_"},!0),e.loadManifest(lib.properties.manifest),e.loadFile({src:"images/RealGame_atlas_.png",type:"spritesheet",id:"RealGame_atlas_"},!0)}},{key:"restartGame",value:function(){gameover=!1;var e=this;this.stage.removeAllChildren(),this.stage.update(),this.stage2.removeAllChildren(),this.stage2.update();var t=new lib.BackgroundGraphic1,i=new lib.BackgroundGraphic2,s=new lib.BackgroundGraphic3,n=new lib.BackgroundGraphic4;this.stage2.addChild(t),this.world=new World,this.stage.addChild(this.world),setInterval(function(){1==e.world.currentLevel?(e.stage2.removeChild(t),e.stage2.addChild(i),e.stage2.update()):2==e.world.currentLevel?(e.stage2.removeChild(i),e.stage2.addChild(s),e.stage2.update()):3==e.world.currentLevel&&(e.stage2.removeChild(s),e.stage2.addChild(n),e.stage2.update())},1e3);var a=this.world.hero;this.stage.on("stagemousedown",function(){gameover||a.jump()}),document.documentElement.addEventListener("keydown",function(e){32==(e.keycode||e.which)&&(e.preventDefault(),gameover||a.jump())},!1)}},{key:"gameOver",value:function(){sceneManager.gameOver()}},{key:"retinalize",value:function(){this.stage.width=this.canvas.width,this.stage.height=this.canvas.height,this.stage2.width=this.canvas2.width,this.stage2.height=this.canvas2.height;var e=window.devicePixelRatio;void 0!==e&&(this.canvas.setAttribute("width",Math.round(this.stage.width*e)),this.canvas.setAttribute("height",Math.round(this.stage.height*e)),this.canvas2.setAttribute("width",Math.round(this.stage.width*e)),this.canvas2.setAttribute("height",Math.round(this.stage.height*e)),this.stage.scaleX=this.stage.scaleY=e,this.stage2.scaleX=this.stage2.scaleY=e,this.canvas.style.width=this.stage.width+"px",this.canvas.style.height=this.stage.height+"px",this.canvas2.style.width=this.stage2.width+"px",this.canvas2.style.height=this.stage2.height+"px")}}]),e}(),game=new Game,sceneManager=new SceneManager;